{% if site.disqus_identifier %}

<section class="comments">
    <h3>{{ site.translations.text.comments | default: "Comments" }}</h3>
    <div id="disqus_thread"></div>
</section>

<script type="text/javascript">
    var disqus_loaded = false;

    var disqus_config = function () {
      this.page.url = '{{ site.url }}';
      this.page.identifier = '{{ site.disqus_identifier }}';
    };

    function load_disqus() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = 'https://{{ site.disqus_identifier }}.disqus.com/embed.js';
        dsq.setAttribute('data-timestamp', + new Date());

        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

        disqus_loaded = true;
    };

    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (!disqus_loaded) {
                load_disqus();
            }
        }
    };
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

{% endif %}
